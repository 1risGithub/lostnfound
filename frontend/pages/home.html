<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Foundify - Home</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../assets/css/global.css" />
    <link rel="stylesheet" href="../assets/css/home.css" />
    <link rel="stylesheet" href="../assets/css/darkmode.css" />

    <!-- Check and apply theme before content is rendered -->
    <script>
      (function () {
        const theme = localStorage.getItem("theme") || "light";
        document.documentElement.setAttribute("data-theme", theme);
      })();
    </script>
  </head>

  <body>
    <!-- Header -->
    <div class="header">
      <a class="app-title">Foundify</a>
      <div class="header-right">
        <label class="switch">
          <input type="checkbox" id="toggleMode" />
          <span class="slider"></span>
        </label>
      </div>
    </div>

    <!-- Content -->
    <div class="container py-4">
      <div id="cardContainer" class="row g-3"></div>
    </div>

    <!-- Footer Navigation -->
    <footer class="footer">
      <div class="container d-flex justify-content-around">
        <a
          href="?page=home"
          id="homeLink"
          onclick="loadPage('home')"
          class="footer-icon"
        >
          <i class="bi bi-house-door-fill"></i>
        </a>
        <a
          href="?page=search"
          id="searchLink"
          onclick="loadPage('search')"
          class="footer-icon"
        >
          <i class="bi bi-search-heart-fill"></i>
        </a>
        <a
          href="?page=addpost"
          id="addLink"
          onclick="loadPage('addpost')"
          class="footer-icon"
        >
          <i class="bi bi-plus-circle-fill"></i>
        </a>
        <a
          href="?page=profile"
          id="profileLink"
          onclick="loadPage('profile')"
          class="footer-icon"
        >
          <i class="bi bi-person-fill"></i>
        </a>
      </div>
    </footer>

    <!-- Bootstrap JS -->
    <script>
      function setActivePage() {
        const urlParams = new URLSearchParams(window.location.search);
        const page = urlParams.get("page") || "home";
        document.querySelectorAll(".footer-icon").forEach((el) => {
          el.classList.remove("active");
        });
        const activeLink = document.querySelector(`a[href="?page=${page}"]`);
        if (activeLink) {
          activeLink.classList.add("active");
        }
      }
      document.addEventListener("DOMContentLoaded", setActivePage);
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../assets/js/darkmode.js" defer></script>
    <script src="../assets/js/home.js" defer></script>
    <script src="../assets/js/search.js" defer></script>
    <script src="../assets/js/addpost.js" defer></script>
    <script src="../assets/js/profile.js" defer></script>
    <script src="../assets/js/report.js" defer></script>
    <script src="../assets/js/signlog.js" defer></script>
    <script src="../assets/js/signup_login.js" defer></script>
    <script src="../assets/js/signup.js" defer></script>
  </body>
</html>
